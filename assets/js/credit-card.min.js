!function(a){"use strict";a(function(){function b(b){if(c)return c=!1,!0;if(!a("#payment_method_iugu-credit-card").is(":checked"))return!0;var d=a(b),e=a("#iugu-credit-card-fields",d),f=a("#iugu-card-installments").val();if(a("#customer-payment-method-id").length>0&&""!==a("#customer-payment-method-id").val())f<1?(a(".woocommerce-error",e).remove(),e.prepend('<div class="woocommerce-error"><ul><li>'+iugu_wc_credit_card_params.i18n_installments_field+" "+iugu_wc_credit_card_params.i18n_is_invalid+".</li></ul></div>")):(a(".iugu-token",d).remove(),c=!0,d.submit());else{var g=d.find("#iugu-card-expiry").val().replace(" ",""),h="";d.find("#iugu-card-expiry").val(g),Iugu.createPaymentToken(b,function(b){f<1&&(b.errors||(b.errors={}),b.errors.installments="is_invalid"),b.errors?(a(".woocommerce-error",e).remove(),h+="<ul>",a.each(b.errors,function(a,b){var c=b;"is_invalid"===c&&(c=iugu_wc_credit_card_params.i18n_is_invalid),h+="<li>"+iugu_wc_credit_card_params["i18n_"+a+"_field"]+" "+c+".</li>"}),h+="</ul>",e.prepend('<div class="woocommerce-error">'+h+"</div>")):(a(".iugu-token",d).remove(),d.append(a('<input class="iugu-token" name="iugu_token" type="hidden" />').val(b.id)),c=!0,d.submit())})}return!1}var c=!1;Iugu.setAccountID(iugu_wc_credit_card_params.account_id),"yes"===iugu_wc_credit_card_params.is_sandbox&&Iugu.setTestMode(!0),a("form.checkout").on("checkout_place_order_iugu-credit-card",function(){return b(this)}),a("form#order_review").submit(function(){return b(this)}),a("body").on("checkout_error",function(){a(".iugu-token").remove()}),a("form.checkout, form#order_review").on("change","#iugu-credit-card-fields input",function(){a(".iugu-token").remove()}),a("form.checkout, form#order_review").on("change","#customer-payment-method-id",function(){""===a(this).val()?a("#new-credit-card").show():a("#new-credit-card").hide()})})}(jQuery);